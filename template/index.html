<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Deteksi Dini Depresi Berbasis AI</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Custom scrollbar for better aesthetics */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #1f2937;
        }
        ::-webkit-scrollbar-thumb {
            background: #4b5563;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #6b7280;
        }
        .page {
            display: block;
        }
        .page.hidden {
            display: none;
        }
    </style>
</head>
<body class="bg-gray-900 text-gray-200">

    <div class="container mx-auto p-4 sm:p-6 md:p-8 max-w-4xl">
        
        <!-- Page 1: Form Section -->
        <div id="form-page" class="page">
            <!-- Header Section -->
            <header class="text-center mb-8">
                <h1 class="text-3xl sm:text-4xl font-bold text-cyan-400">Deteksi Dini Depresi</h1>
                <p class="text-gray-400 mt-2">Isi kuesioner di bawah ini untuk mendapatkan prediksi berdasarkan model AI.</p>
            </header>

            <!-- Prediction Form -->
            <form id="prediction-form" class="bg-gray-800 p-6 sm:p-8 rounded-2xl shadow-lg">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6">
                    
                    <!-- Demographics Section -->
                    <div class="md:col-span-2 text-lg font-semibold text-cyan-300 border-b border-gray-700 pb-2 mb-2">Informasi Demografi</div>

                    <div>
                        <label for="AGERNG" class="block mb-2 text-sm font-medium text-gray-300">Rentang Usia</label>
                        <select id="AGERNG" class="bg-gray-700 border border-gray-600 text-white text-sm rounded-lg focus:ring-cyan-500 focus:border-cyan-500 block w-full p-2.5">
                            <option value="0">16-20</option>
                            <option value="1">21-25</option>
                            <option value="2" selected>26-30</option>
                            <option value="3">31-35</option>
                            <option value="4">36-40</option>
                            <option value="5">41-45</option>
                            <option value="6">46-50</option>
                            <option value="7">51-55</option>
                            <option value="8">56-60</option>
                            <option value="9">61+</option>
                        </select>
                    </div>

                    <div>
                        <label for="GENDER" class="block mb-2 text-sm font-medium text-gray-300">Jenis Kelamin</label>
                        <select id="GENDER" class="bg-gray-700 border border-gray-600 text-white text-sm rounded-lg focus:ring-cyan-500 focus:border-cyan-500 block w-full p-2.5">
                            <option value="0">Pria</option>
                            <option value="1" selected>Wanita</option>
                        </select>
                    </div>

                    <div>
                        <label for="EDU" class="block mb-2 text-sm font-medium text-gray-300">Pendidikan Terakhir</label>
                        <select id="EDU" class="bg-gray-700 border border-gray-600 text-white text-sm rounded-lg focus:ring-cyan-500 focus:border-cyan-500 block w-full p-2.5">
                            <option value="0">SMP/Sederajat</option>
                            <option value="1">SMA/Sederajat</option>
                            <option value="2" selected>Sarjana (S1)</option>
                            <option value="3">Pascasarjana (S2/S3)</option>
                        </select>
                    </div>

                    <div>
                        <label for="PROF" class="block mb-2 text-sm font-medium text-gray-300">Profesi</label>
                        <select id="PROF" class="bg-gray-700 border border-gray-600 text-white text-sm rounded-lg focus:ring-cyan-500 focus:border-cyan-500 block w-full p-2.5">
                            <option value="0" selected>Pelajar/Mahasiswa</option>
                            <option value="1">Pegawai Swasta</option>
                            <option value="2">Pegawai Negeri</option>
                            <option value="3">Wiraswasta</option>
                            <option value="4">Tidak Bekerja</option>
                            <option value="5">Lainnya</option>
                        </select>
                    </div>

                    <div>
                        <label for="MARSTS" class="block mb-2 text-sm font-medium text-gray-300">Status Pernikahan</label>
                        <select id="MARSTS" class="bg-gray-700 border border-gray-600 text-white text-sm rounded-lg focus:ring-cyan-500 focus:border-cyan-500 block w-full p-2.5">
                            <option value="0" selected>Belum Menikah</option>
                            <option value="1">Menikah</option>
                            <option value="2">Bercerai</option>
                        </select>
                    </div>

                    <div>
                        <label for="RESDPL" class="block mb-2 text-sm font-medium text-gray-300">Tempat Tinggal</label>
                        <select id="RESDPL" class="bg-gray-700 border border-gray-600 text-white text-sm rounded-lg focus:ring-cyan-500 focus:border-cyan-500 block w-full p-2.5">
                            <option value="0">Desa</option>
                            <option value="1">Kota Kecil</option>
                            <option value="2" selected>Kota Besar</option>
                        </select>
                    </div>

                    <div>
                        <label for="LIVWTH" class="block mb-2 text-sm font-medium text-gray-300">Tinggal Dengan Siapa</label>
                        <select id="LIVWTH" class="bg-gray-700 border border-gray-600 text-white text-sm rounded-lg focus:ring-cyan-500 focus:border-cyan-500 block w-full p-2.5">
                            <option value="0">Tanpa Keluarga</option>
                            <option value="1" selected>Dengan Keluarga</option>
                        </select>
                    </div>

                    <!-- Lifestyle & Environment Section -->
                    <div class="md:col-span-2 text-lg font-semibold text-cyan-300 border-b border-gray-700 pb-2 mb-2 mt-4">Gaya Hidup & Lingkungan</div>

                    <div>
                        <label for="ENVSAT" class="block mb-2 text-sm font-medium text-gray-300">Apakah Anda puas dengan lingkungan Anda?</label>
                        <select id="ENVSAT" class="bg-gray-700 border border-gray-600 text-white text-sm rounded-lg focus:ring-cyan-500 focus:border-cyan-500 block w-full p-2.5">
                            <option value="0">Tidak</option>
                            <option value="1" selected>Ya</option>
                        </select>
                    </div>
                    
                    <div>
                        <label for="POSSAT" class="block mb-2 text-sm font-medium text-gray-300">Apakah Anda puas dengan posisi Anda saat ini?</label>
                        <select id="POSSAT" class="bg-gray-700 border border-gray-600 text-white text-sm rounded-lg focus:ring-cyan-500 focus:border-cyan-500 block w-full p-2.5">
                            <option value="0">Tidak</option>
                            <option value="1" selected>Ya</option>
                        </select>
                    </div>

                    <div>
                        <label for="FINSTR" class="block mb-2 text-sm font-medium text-gray-300">Apakah Anda mengalami kesulitan keuangan?</label>
                        <select id="FINSTR" class="bg-gray-700 border border-gray-600 text-white text-sm rounded-lg focus:ring-cyan-500 focus:border-cyan-500 block w-full p-2.5">
                            <option value="0" selected>Tidak</option>
                            <option value="1">Ya</option>
                        </select>
                    </div>

                    <div>
                        <label for="DEBT" class="block mb-2 text-sm font-medium text-gray-300">Apakah Anda memiliki hutang?</label>
                        <select id="DEBT" class="bg-gray-700 border border-gray-600 text-white text-sm rounded-lg focus:ring-cyan-500 focus:border-cyan-500 block w-full p-2.5">
                            <option value="0" selected>Tidak</option>
                            <option value="1">Ya</option>
                        </select>
                    </div>

                    <div>
                        <label for="PHYEX" class="block mb-2 text-sm font-medium text-gray-300">Seberapa sering Anda berolahraga?</label>
                        <select id="PHYEX" class="bg-gray-700 border border-gray-600 text-white text-sm rounded-lg focus:ring-cyan-500 focus:border-cyan-500 block w-full p-2.5">
                            <option value="0">Tidak Pernah</option>
                            <option value="1" selected>Kadang-kadang</option>
                            <option value="2">Secara Teratur</option>
                        </select>
                    </div>

                    <div>
                        <label for="SMOKE" class="block mb-2 text-sm font-medium text-gray-300">Apakah Anda merokok?</label>
                        <select id="SMOKE" class="bg-gray-700 border border-gray-600 text-white text-sm rounded-lg focus:ring-cyan-500 focus:border-cyan-500 block w-full p-2.5">
                            <option value="0" selected>Tidak</option>
                            <option value="1">Ya</option>
                        </select>
                    </div>

                    <div>
                        <label for="DRINK" class="block mb-2 text-sm font-medium text-gray-300">Apakah Anda mengonsumsi alkohol?</label>
                        <select id="DRINK" class="bg-gray-700 border border-gray-600 text-white text-sm rounded-lg focus:ring-cyan-500 focus:border-cyan-500 block w-full p-2.5">
                            <option value="0" selected>Tidak</option>
                            <option value="1">Ya</option>
                        </select>
                    </div>
                    
                    <div>
                        <label for="AVGSLP" class="block mb-2 text-sm font-medium text-gray-300">Rata-rata jam tidur per hari?</label>
                        <select id="AVGSLP" class="bg-gray-700 border border-gray-600 text-white text-sm rounded-lg focus:ring-cyan-500 focus:border-cyan-500 block w-full p-2.5">
                            <option value="0">Di bawah 5 jam</option>
                            <option value="1">5 jam</option>
                            <option value="2">6 jam</option>
                            <option value="3" selected>7 jam</option>
                            <option value="4">8 jam</option>
                            <option value="5">Lebih dari 8 jam</option>
                        </select>
                    </div>

                    <div>
                        <label for="TSSN" class="block mb-2 text-sm font-medium text-gray-300">Waktu di media sosial per hari?</label>
                        <select id="TSSN" class="bg-gray-700 border border-gray-600 text-white text-sm rounded-lg focus:ring-cyan-500 focus:border-cyan-500 block w-full p-2.5">
                            <option value="0">Kurang dari 2 jam</option>
                            <option value="1" selected>2-4 jam</option>
                            <option value="2">5-7 jam</option>
                            <option value="3">8-10 jam</option>
                            <option value="4">Lebih dari 10 jam</option>
                        </select>
                    </div>
                    
                    <div>
                        <label for="WRKPRE" class="block mb-2 text-sm font-medium text-gray-300">Tingkat tekanan kerja/studi?</label>
                        <select id="WRKPRE" class="bg-gray-700 border border-gray-600 text-white text-sm rounded-lg focus:ring-cyan-500 focus:border-cyan-500 block w-full p-2.5">
                            <option value="0">Sangat Berat</option>
                            <option value="1" selected>Sedang</option>
                            <option value="2">Ringan</option>
                            <option value="3">Tidak Ada Tekanan</option>
                        </select>
                    </div>

                    <!-- Psychological & Health Section -->
                    <div class="md:col-span-2 text-lg font-semibold text-cyan-300 border-b border-gray-700 pb-2 mb-2 mt-4">Kondisi Kesehatan & Psikologis</div>
                    
                    <div class="md:col-span-2 grid grid-cols-1 sm:grid-cols-2 gap-x-8 gap-y-6">
                        <div>
                            <label for="ILLNESS" class="block mb-2 text-sm font-medium text-gray-300">Punya riwayat penyakit lain?</label>
                            <select id="ILLNESS" class="bg-gray-700 border border-gray-600 text-white text-sm rounded-lg focus:ring-cyan-500 focus:border-cyan-500 block w-full p-2.5">
                                <option value="0" selected>Tidak</option><option value="1">Ya</option>
                            </select>
                        </div>
                        <div>
                            <label for="PREMED" class="block mb-2 text-sm font-medium text-gray-300">Pernah berobat ke psikolog/psikiater?</label>
                            <select id="PREMED" class="bg-gray-700 border border-gray-600 text-white text-sm rounded-lg focus:ring-cyan-500 focus:border-cyan-500 block w-full p-2.5">
                                <option value="0" selected>Tidak</option><option value="1">Ya</option>
                            </select>
                        </div>
                        <div>
                            <label for="EATDIS" class="block mb-2 text-sm font-medium text-gray-300">Mengalami gangguan makan?</label>
                            <select id="EATDIS" class="bg-gray-700 border border-gray-600 text-white text-sm rounded-lg focus:ring-cyan-500 focus:border-cyan-500 block w-full p-2.5">
                                <option value="0" selected>Tidak</option><option value="1">Ya</option>
                            </select>
                        </div>
                         <div>
                            <label for="INSOM" class="block mb-2 text-sm font-medium text-gray-300">Mengalami insomnia?</label>
                            <select id="INSOM" class="bg-gray-700 border border-gray-600 text-white text-sm rounded-lg focus:ring-cyan-500 focus:border-cyan-500 block w-full p-2.5">
                                <option value="0">Tidak</option><option value="1" selected>Ya</option>
                            </select>
                        </div>
                        <div>
                            <label for="ANXI" class="block mb-2 text-sm font-medium text-gray-300">Mengalami kecemasan berlebih?</label>
                            <select id="ANXI" class="bg-gray-700 border border-gray-600 text-white text-sm rounded-lg focus:ring-cyan-500 focus:border-cyan-500 block w-full p-2.5">
                                <option value="0">Tidak</option><option value="1" selected>Ya</option>
                            </select>
                        </div>
                        <div>
                            <label for="DEPRI" class="block mb-2 text-sm font-medium text-gray-300">Pernah didiagnosis depresi?</label>
                            <select id="DEPRI" class="bg-gray-700 border border-gray-600 text-white text-sm rounded-lg focus:ring-cyan-500 focus:border-cyan-500 block w-full p-2.5">
                                <option value="0" selected>Tidak</option><option value="1">Ya</option>
                            </select>
                        </div>
                        <div>
                            <label for="ABUSED" class="block mb-2 text-sm font-medium text-gray-300">Pernah mengalami pelecehan?</label>
                            <select id="ABUSED" class="bg-gray-700 border border-gray-600 text-white text-sm rounded-lg focus:ring-cyan-500 focus:border-cyan-500 block w-full p-2.5">
                                <option value="0" selected>Tidak</option><option value="1">Ya</option>
                            </select>
                        </div>
                        <div>
                            <label for="CHEAT" class="block mb-2 text-sm font-medium text-gray-300">Pernah dikhianati?</label>
                            <select id="CHEAT" class="bg-gray-700 border border-gray-600 text-white text-sm rounded-lg focus:ring-cyan-500 focus:border-cyan-500 block w-full p-2.5">
                                <option value="0" selected>Tidak</option><option value="1">Ya</option>
                            </select>
                        </div>
                        <div>
                            <label for="THREAT" class="block mb-2 text-sm font-medium text-gray-300">Pernah diancam?</label>
                            <select id="THREAT" class="bg-gray-700 border border-gray-600 text-white text-sm rounded-lg focus:ring-cyan-500 focus:border-cyan-500 block w-full p-2.5">
                                <option value="0" selected>Tidak</option><option value="1">Ya</option>
                            </select>
                        </div>
                        <div>
                            <label for="SUICIDE" class="block mb-2 text-sm font-medium text-gray-300">Pernah memiliki pikiran bunuh diri?</label>
                            <select id="SUICIDE" class="bg-gray-700 border border-gray-600 text-white text-sm rounded-lg focus:ring-cyan-500 focus:border-cyan-500 block w-full p-2.5">
                                <option value="0" selected>Tidak</option><option value="1">Ya</option>
                            </select>
                        </div>
                        <div>
                            <label for="INFER" class="block mb-2 text-sm font-medium text-gray-300">Merasa inferior/rendah diri?</label>
                            <select id="INFER" class="bg-gray-700 border border-gray-600 text-white text-sm rounded-lg focus:ring-cyan-500 focus:border-cyan-500 block w-full p-2.5">
                                <option value="0" selected>Tidak</option><option value="1">Ya</option>
                            </select>
                        </div>
                        <div>
                            <label for="CONFLICT" class="block mb-2 text-sm font-medium text-gray-300">Sedang berkonflik dengan seseorang?</label>
                            <select id="CONFLICT" class="bg-gray-700 border border-gray-600 text-white text-sm rounded-lg focus:ring-cyan-500 focus:border-cyan-500 block w-full p-2.5">
                                <option value="0">Tidak</option><option value="1" selected>Ya</option>
                            </select>
                        </div>
                        <div>
                            <label for="LOST" class="block mb-2 text-sm font-medium text-gray-300">Baru saja kehilangan seseorang/sesuatu?</label>
                            <select id="LOST" class="bg-gray-700 border border-gray-600 text-white text-sm rounded-lg focus:ring-cyan-500 focus:border-cyan-500 block w-full p-2.5">
                                <option value="0" selected>Tidak</option><option value="1">Ya</option>
                            </select>
                        </div>
                    </div>

                </div>

                <!-- Submit Button -->
                <div class="mt-8 text-center">
                    <button type="submit" class="text-white bg-cyan-600 hover:bg-cyan-700 focus:ring-4 focus:outline-none focus:ring-cyan-800 font-medium rounded-lg text-base w-full sm:w-auto px-10 py-3 text-center transition-colors duration-300">
                        Lihat Hasil Prediksi
                    </button>
                </div>
            </form>
        </div>

        <!-- Page 2: Result Section -->
        <div id="result-page" class="page hidden">
            <div class="bg-gray-800 p-6 sm:p-8 rounded-2xl shadow-lg text-center">
                <h2 class="text-2xl font-bold text-cyan-400 mb-4">Hasil Prediksi</h2>
                <p id="result-text" class="text-4xl font-bold mb-2"></p>
                <p id="probability-text" class="text-gray-400 mb-6"></p>
                <div class="bg-yellow-900 border-l-4 border-yellow-400 text-yellow-200 p-4 rounded-lg text-left mb-8">
                    <p class="font-bold">Penting:</p>
                    <p class="text-sm">Hasil ini adalah prediksi berdasarkan model kecerdasan buatan dan data yang Anda masukkan. Ini BUKAN diagnosis medis. Untuk diagnosis dan penanganan yang akurat, silakan berkonsultasi dengan profesional kesehatan mental seperti psikolog atau psikiater.</p>
                </div>
                <button id="back-to-form-button" class="text-white bg-gray-600 hover:bg-gray-700 focus:ring-4 focus:outline-none focus:ring-gray-800 font-medium rounded-lg text-base w-full sm:w-auto px-10 py-3 text-center transition-colors duration-300">
                    Kembali ke Form
                </button>
            </div>
        </div>

    </div>

    <script>
        // Get page elements
        const formPage = document.getElementById('form-page');
        const resultPage = document.getElementById('result-page');
        const predictionForm = document.getElementById('prediction-form');
        const backToFormButton = document.getElementById('back-to-form-button');

        // Handle form submission
        predictionForm.addEventListener('submit', function(event) {
            // Prevent the form from reloading the page
            event.preventDefault();

            // The feature order must be EXACTLY the same as in your Python script.
            const featureOrder = [
                'AGERNG', 'GENDER', 'EDU', 'PROF', 'MARSTS', 'RESDPL', 'LIVWTH', 
                'ENVSAT', 'POSSAT', 'FINSTR', 'DEBT', 'PHYEX', 'SMOKE', 'DRINK', 
                'ILLNESS', 'PREMED', 'EATDIS', 'AVGSLP', 'INSOM', 'TSSN', 
                'WRKPRE', 'ANXI', 'DEPRI', 'ABUSED', 'CHEAT', 'THREAT', 'SUICIDE', 
                'INFER', 'CONFLICT', 'LOST'
            ];

            // Collect all values from the form in the correct order.
            const numericalInputData = featureOrder.map(featureId => {
                const element = document.getElementById(featureId);
                return parseInt(element.value, 10);
            });
            
            console.log("Input Data Collected:", numericalInputData);

            // --- IMPORTANT: PREDICTION LOGIC (PLACEHOLDER) ---
            const riskFactors = ['FINSTR', 'DEBT', 'ILLNESS', 'PREMED', 'EATDIS', 'INSOM', 'ANXI', 'DEPRI', 'ABUSED', 'CHEAT', 'THREAT', 'SUICIDE', 'INFER', 'CONFLICT', 'LOST'];
            let riskScore = 0;
            numericalInputData.forEach((value, index) => {
                const featureName = featureOrder[index];
                if (riskFactors.includes(featureName) && value === 1) {
                    riskScore += 1;
                }
            });
            const predictionProbability = Math.min(0.15 + (riskScore * 0.06), 0.95);
            const predictedClass = predictionProbability > 0.5 ? 1 : 0;
            // --- END OF PLACEHOLDER LOGIC ---

            // Get result elements
            const resultText = document.getElementById('result-text');
            const probabilityText = document.getElementById('probability-text');
            
            // Display the results
            if (predictedClass === 1) {
                resultText.textContent = "Terindikasi Depresi";
                resultText.className = "text-4xl font-bold mb-2 text-red-400";
            } else {
                resultText.textContent = "Tidak Terindikasi Depresi";
                resultText.className = "text-4xl font-bold mb-2 text-green-400";
            }
            probabilityText.textContent = `Probabilitas dari Model: ${(predictionProbability * 100).toFixed(2)}%`;
            
            // Switch to the result page
            formPage.classList.add('hidden');
            resultPage.classList.remove('hidden');
            window.scrollTo(0, 0); // Scroll to top of the new page
        });

        // Handle clicking the "back" button
        backToFormButton.addEventListener('click', function() {
            // Switch back to the form page
            resultPage.classList.add('hidden');
            formPage.classList.remove('hidden');
            window.scrollTo(0, 0); // Scroll to top
        });
    </script>
</body>
</html>
